# CLAUDE.md

このファイルは、このリポジトリでコードを操作する際のClaude Code (claude.ai/code) へのガイダンスを提供します。

## プロジェクト概要

AHC Statisticsは、AtCoder Heuristic Contest (AHC) の長期コンテストに向けた包括的な統計収集・分析システムです。このシステムは、システムテストの結果の詳細な分析に焦点を当て、参加者が自分のパフォーマンスを理解し、改善点を特定するのに役立ちます。

システムは、個別のテストケーススコアリング、パフォーマンス比較、ランキングの可視化を含む詳細なパフォーマンス分析を備えた静的HTMLページを生成します。

## アーキテクチャ

### データ構造
- **コンテストディレクトリ**: 各コンテストは独自のディレクトリを持ちます（例：`022/`, `043/`, `045/`）
- **設定**: コンテスト固有のJSONファイル（`ahc001.json` - `ahc048.json`）にコンテストのメタデータが含まれます
- **テストデータ**: 個別のテストケース結果が詳細なCSV形式で保存されます
- **生成された出力**: 静的HTMLページと処理されたCSVファイル

### 主要なデータ形式

#### コンテスト結果CSV構造
```
username,score_0,result_0,score_1,result_1,...score_N,result_N
```
各コンテストは1000以上のテストケースを持つことができ、各テストにスコアと結果ステータスの両方があります。

#### テスト入力パラメータ
```
SEED,N,M,K,T
[テストケースパラメータ]
```
各テストケースの特性を定義するコンテスト固有のパラメータです。

#### コンテストごとのディレクトリ構造
```
[contest_number]/
├── all_results.csv     # 全参加者の完全な結果
├── index.html          # メイン順位表ページ
├── test_inputs.csv     # テストケースパラメータ定義
├── scores/             # ユーザーごとの個別CSVファイル
└── users/              # ユーザーごとの個別HTMLページ
```

## 生成される出力

### 静的サイト構造
- **フロントエンド**: MilligramCSSフレームワーク + `styles.css`のカスタムCSS
- **テーブル**: 大規模データセット用の高度なスティッキーヘッダー/カラム機能
- **レスポンシブデザイン**: 固定ナビゲーション要素による横スクロール
- **データ可視化**: 豊富なテストケース詳細を含むパフォーマンス比較テーブル

### CSSアーキテクチャ
`styles.css`ファイルには以下の専用スタイリングが含まれています：
- `.table-container`: 固定サイズのスクロール可能なテーブルコンテナ
- `.sticky-table`: 複雑なデータ表示用のマルチレベルスティッキーヘッダー
- `.sticky-column`: 横スクロール中も左端の列を表示し続ける
- パフォーマンスデータ表示用のカスタムテーブルセル書式

## 主要機能

### パフォーマンス分析
- 個別テストケースパフォーマンス追跡（コンテストあたり1000以上のテストケース）
- 参加者間の比較分析
- 詳細な内訳を含むランキング可視化
- パラメータベースのパフォーマンス分類（例：M、K値による）

### マルチコンテストサポート
- AHC001からAHC048以降のコンテストをサポート
- 全コンテストで一貫したデータ構造
- JSONファイルによるコンテスト固有の設定
- 将来のコンテストに対応したスケーラブルなアーキテクチャ

## データ処理ワークフロー

1. **データ収集**: 生のコンテスト結果とテストパラメータ
2. **処理**: テストケースごとの結果を含む詳細なCSVファイルの生成
3. **HTML生成**: コンテストと個別ユーザー用の静的ページ作成
4. **出力**: 処理されたファイルを`output/`ディレクトリに保存

## システムでの作業

### ファイル構成
- コンテストデータは番号付きディレクトリ内で自己完結
- 設定ファイルは一貫した命名規則を使用（`ahc[XXX].json`）
- 生成される出力は予測可能なパターンに従う
- アセットとスタイリングは一元化

### データ依存関係
- 外部ビルドシステムなし（純粋な静的生成）
- JSONの設定ファイルがコンテスト固有のパラメータを定義
- CSVファイルは一貫した列命名パターンを使用
- HTMLテンプレートはサーバーサイド生成を使用している可能性（ERBの言及から推測）

### 特別な考慮事項
- 大規模なCSVファイル（テストケース用に1000以上の列）
- 最適化されたテーブルレンダリングが必要な高密度データ
- インターフェース全体での日本語コンテンツ
- 幅広いデータテーブルを扱うレスポンシブデザイン

## ブラウザ互換性
生成されるサイトでは以下を使用：
- モダンCSS機能（stickyポジショニング、CSS Grid/Flexbox）
- MilligramCSSフレームワーク用の外部CDN
- 標準的なHTML5構造
- コア機能のJavaScript依存関係なし